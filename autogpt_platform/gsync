#!/bin/bash

MODE=$1

if [ "$MODE" = "push" ]; then
  echo "ğŸš€ Committing & pushing to origin/main..."
  git add .
  git commit -m "gsync auto-push on $(date '+%Y-%m-%d %H:%M:%S')" || echo "âš ï¸ Nothing to commit."
  git push origin main
  echo "âœ… Push complete."
else
  echo "ğŸ”„ Syncing with origin/main..."
  git stash push -m "autosave-$(date +%s)"
  git pull origin main --rebase
  git stash pop || echo "âœ… No local changes to reapply."
  echo "âœ… Pull sync complete."
fi
